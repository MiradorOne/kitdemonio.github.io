"use strict";$(document).ready(function(){$(".substruct").click(function(){var t=$(this).parent().find("input"),i=parseInt(t.val())-1;return i=1>i?0:i,t.val(i),t.change(),!1}),$(".add").click(function(){var t=$(this).parent().find("input");return t.val(parseInt(t.val())+1),t.change(),!1})}),$(function(){function t(t){for(var i=0;i<h.length;i++)if(t===h[i].id)return h[i].price}function i(t){for(var i=0;i<h.length;i++)if(h[i].id===t)return h[i].discountPercent}function n(t){return d+=t,l=d,d}function e(){return+v.count}function c(n){var c,r=i(n);if(f>0){var u=d*f/100;return $(".total-price-with-discount").text(o()),u.toFixed(1)}return r>0&&0===f?(u=t(n)*r/100,p=u*e(),(u*e()).toFixed(1)):(c=$(".discount-price").text(),c=c.split(" "),+c[0])}function r(i,n){return t(i)*n}function o(){return console.log(p+" Total Discount from getTotalPriceWithDiscount"),d-p}function u(t){for(var i in x)if(i===t)return!0}function s(t){return x[t]}function a(t){return l=d,(l-=l*t/100).toFixed(1)}var d=0,l=0,p=0,f=0,h=[{id:0,content:"Shaurma",discountPercent:0,price:48},{id:1,content:"Pizza Vegetarienne",discountPercent:15,oldPrice:90,price:72},{id:2,content:"Salade Cezar",discountPercent:0,price:48}],v=[],x={SHAURMA:10,DIMON:80,KIEBAB:50},m=+$(".counter").find("input").val();0===m&&$(".substruct").css("display","none"),$(".add").on("click",function(){var i=+$(this).parent().find("input").val();i>0&&$(this).parent().find(".substruct").css("display","inline-block");var u=+$(this).closest(".dishes").attr("data-id"),s=t(u),a=$(this).parent().parent().find(".dish-multiply-price");a.text(r(u,i)),v.id=u,v.count=i,e(),n(s),$(".total-price").text(d),$(".discount-price").text(c(u)),$(".total-price-with-discount").text(o())}),$(".substruct").on("click",function(){var i=+$(this).parent().find("input").val();1>i&&$(this).parent().find(".substruct").css("display","none");var u=+$(this).closest(".dishes").attr("data-id"),s=t(u),a=$(this).parent().parent().find(".dish-multiply-price");a.text(r(u,i)),v.id=u,v.count=i,console.log(v),e(),n(-s),$(".total-price").text(d),$(".discount-price").text(c(u)),$(".total-price-with-discount").text(o())}),$(".promo-code").on("click",function(){$(this).children("span").text(""),$(this).children("input").css("display","inline-block"),$("input[name=send-promo-code]").css("visibility","visible")}),$("input[name=send-promo-code]").on("click",function(){var t=$(".promo-code").children("input").val(),i=!1;u(t)===!0?(l=a(s(t)),$(".total-price-with-discount").text(l),f=s(t),p=(d-l).toFixed(1),$(".discount-price").text(p),i=!0):i||$(".promo-code").children("input").val("Your promo code is invalid")})});