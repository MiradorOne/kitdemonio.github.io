{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["$(document).ready(function () {\n\n  $('.substruct').click(function () {\n    var $input = $(this).parent().find('input');\n    var count = parseInt($input.val()) - 1;\n    count = count < 1 ? 0 : count;\n    $input.val(count);\n    $input.change();\n    return false;\n  });\n\n  $('.add').click(function () {\n    var $input = $(this).parent().find('input');\n    $input.val(parseInt($input.val()) + 1);\n    $input.change();\n    return false;\n  });\n});\n\n\n//Counter\n$(function () {\n\n  var totalPrice = 0;\n  var totalPriceWithDiscount = 0;\n  var totalDiscount = 0;\n  var globalDiscountPercent = 0;\n  var globalQuantity = 0;\n  var bucket = [\n    {\n      id: 0,\n      content: 'Shaurma',\n      discountPercent: 0,\n      price: 48\n    },\n    {\n      id: 1,\n      content: 'Pizza Vegetarienne',\n      discountPercent: 15,\n      oldPrice: 90,\n      price: 72\n    },\n    {\n      id: 2,\n      content: 'Salade Cezar',\n      discountPercent: 0,\n      price: 48\n    }\n  ];\n\n  var temp = [];\n\n  function findDishPriceById(dishId) {\n    for (var i = 0; i < bucket.length; i++) {\n      if (dishId === bucket[i].id) {\n        return bucket[i].price;\n      }\n    }\n  }\n\n  function findDishDiscountById(dishId) {\n    for (var i = 0; i < bucket.length; i++) {\n      if (bucket[i].id === dishId) {\n        return bucket[i].discountPercent;\n      }\n    }\n  }\n\n  function countTotalPrice(dishPrice) {\n    totalPrice = totalPrice + dishPrice;\n    totalPriceWithDiscount = totalPrice;\n    return totalPrice;\n  }\n\n  function dishQuantity() {\n    // globalQuantity += +temp.count;\n    return +temp.count;\n  }\n\n  function countDiscount(dishId) {\n    var currentValue;\n    var discountPercent = findDishDiscountById(dishId);\n    if (globalDiscountPercent > 0) {\n\n      var discountPrice = (totalPrice * globalDiscountPercent / 100);\n      $('.total-price-with-discount').text(getTotalPriceWithDiscount());\n      return (discountPrice).toFixed(1);\n    } else if (discountPercent > 0 && globalDiscountPercent === 0) {\n      discountPrice = (findDishPriceById(dishId) * discountPercent / 100);\n      totalDiscount = discountPrice * dishQuantity();\n      return (discountPrice * dishQuantity()).toFixed(1);\n    } else {\n      currentValue = $('.discount-price').text();\n      currentValue = currentValue.split(' ');\n      return +currentValue[0];\n    }\n  }\n\n  function countDishTotalPrice(dishId, dishQuantity) {\n    return findDishPriceById(dishId) * dishQuantity;\n  }\n\n  function getTotalPriceWithDiscount() {\n    console.log(totalDiscount + ' Total Discount from getTotalPriceWithDiscount');\n    return totalPrice - totalDiscount;\n  }\n\n  function checkPromocode(code) {\n    for (var key in promoCode) {\n      if (key === code) {\n        return true;\n      }\n    }\n  }\n\n  function getPromoCodeDiscount(code) {\n    return promoCode[code];\n  }\n\n  function usePromoCode(discountPercent) {\n    totalPriceWithDiscount = totalPrice;\n    return (totalPriceWithDiscount = totalPriceWithDiscount - totalPriceWithDiscount * discountPercent / 100).toFixed(1);\n  }\n\n  //Promo codes\n  var promoCode = {\n    SHAURMA: 10,\n    DIMON: 80,\n    KIEBAB: 50\n  };\n\n\n  var count = +$('.counter').find('input').val();\n  if (count === 0) {\n    $('.substruct').css('display', 'none');\n  }\n\n  $('.add').on('click', function () {\n    var count = +$(this).parent().find('input').val();\n    if (count > 0) {\n      $(this).parent().find('.substruct').css('display', 'inline-block');\n    }\n\n    // console.log(totalPrice);\n    var dishId = +$(this).closest('.dishes').attr('data-id');\n    var price = findDishPriceById(dishId);\n    var multiplyPrice = $(this).parent().parent().find('.dish-multiply-price');\n    multiplyPrice.text(countDishTotalPrice(dishId, count));\n    //\n    temp.id = dishId;\n    temp.count = count;\n    // console.log(temp);\n    //\n    //Total price\n    dishQuantity();\n    countTotalPrice(price);\n    $('.total-price').text(totalPrice);\n    //  Discount\n    $('.discount-price').text(countDiscount(dishId));\n\n    //  Total price with discount\n    $('.total-price-with-discount').text(getTotalPriceWithDiscount());\n\n  });\n  $('.substruct').on('click', function () {\n    var count = +$(this).parent().find('input').val();\n    if (count < 1) {\n      $(this).parent().find('.substruct').css('display', 'none');\n    }\n\n\n    var dishId = +$(this).closest('.dishes').attr('data-id');\n    var price = findDishPriceById(dishId);\n    var multiplyPrice = $(this).parent().parent().find('.dish-multiply-price');\n    multiplyPrice.text(countDishTotalPrice(dishId, count));\n\n    //\n    temp.id = dishId;\n    temp.count = count;\n    console.log(temp);\n    //\n    //Total price\n    dishQuantity();\n    countTotalPrice(-price);\n    $('.total-price').text(totalPrice);\n    // //  Discount\n    $('.discount-price').text(countDiscount(dishId));\n    //  Total price with discount\n    $('.total-price-with-discount').text(getTotalPriceWithDiscount());\n  });\n\n  //Makes promo code input visible\n  $('.promo-code').on('click', function () {\n    $(this).children('span').text('');\n    $(this).children('input').css('display', 'inline-block');\n    $('input[name=send-promo-code]').css('visibility', 'visible');\n  });\n\n\n  $('input[name=send-promo-code]').on('click', function () {\n    var code = $('.promo-code').children('input').val();\n    var valid = false;\n    if (checkPromocode(code) === true) {\n      totalPriceWithDiscount = usePromoCode(getPromoCodeDiscount(code));\n      $('.total-price-with-discount').text(totalPriceWithDiscount);\n      globalDiscountPercent = getPromoCodeDiscount(code);\n      totalDiscount = (totalPrice - totalPriceWithDiscount).toFixed(1);\n      $('.discount-price').text(totalDiscount);\n      valid = true;\n    }\n    else if (!valid) {\n      $('.promo-code').children('input').val('Your promo code is invalid');\n    }\n  });\n});\n"],"sourceRoot":"/source/"}